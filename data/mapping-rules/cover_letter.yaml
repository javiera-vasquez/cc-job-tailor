# Cover Letter Transformation Rules
# This file defines how to transform cover letter templates into job-specific versions

schema_version: "1.0"

# Target output schema for tailored cover letters
target_schema:
  version: "string"                      # Schema version
  job_focus: "string"                    # ai_focused | qa_focused | frontend_focused
  analysis_date: "string"                # Date of job analysis

  cover_letter:
    company: "string"                    # Target company name
    position: "string"                   # Target job position
    job_focus: "string"                  # ai_focused | qa_focused | frontend_focused
    date: "string"                       # Application date

    personal_info:
      name: "string"                     # Full name
      address: "string"                  # Physical address
      email: "string"                    # Email address
      phone: "string"                    # Phone number
      linkedin: "string"                 # LinkedIn profile URL
      github: "string"                   # GitHub profile URL

    content:
      letter_title: "string"             # Cover letter title
      opening_line: "string"             # Personalized opening line
      body: ["array"]                    # Array of paragraph strings
      signature: "string"                # Professional signature block

# Transformation rules
transformation_rules:

  # Template selection based on job focus
  template_selection:
    source: "cover_letter.templates"
    selection_key: "{{ job_focus }}"    # ai_focused | qa_focused | frontend_focused
    fallback: "frontend_focused"        # Default template if focus unclear

  # Variable replacement rules
  variable_replacement:
    - placeholder: "[COMPANY]"
      source: "job_analysis.company"

    - placeholder: "[POSITION]"
      source: "job_analysis.position"

    - placeholder: "[TECH_SKILLS]"
      source: "job_analysis.requirements.must_have_skills"
      transformation: "select_top_3_matching"

  # Content enhancement rules
  content_optimization:
    - "integrate_matching_skills"
    - "select_relevant_achievements"
    - "add_company_insights"
    - "format_body_as_paragraph_array"

  # Tone and style adjustments
  tone_default: "professional"

# Quality rules
length_constraints:
  total_words: 200-400

# Required fields
required_fields:
  - "job_analysis.company"
  - "job_analysis.position"
  - "job_analysis.job_focus"


# Output template structure
output_template: |
  version: "{{ schema_version }}"
  job_focus: "{{ job_analysis.job_focus }}"
  analysis_date: "{{ analysis_date }}"

  cover_letter:
    company: "{{ job_analysis.company }}"
    position: "{{ job_analysis.position }}"
    job_focus: "{{ job_analysis.job_focus }}"
    date: "{{ current_date }}"

    personal_info:
      name: "{{ personal_info.name }}"
      address: "{{ personal_info.address }}"
      email: "{{ personal_info.email }}"
      phone: "{{ personal_info.phone }}"
      linkedin: "{{ personal_info.linkedin }}"
      github: "{{ personal_info.github }}"

    content:
      letter_title: "Cover Letter {{ job_analysis.primary_focus | title }} Engineer"

      opening_line: |
        Dear {{ company }} Hiring Team,

      body:
        - "I am writing to express my strong interest in the {{ position }} role. As a {{ role_level }} {{ primary_discipline }} with over {{ years_experience }} years of experience building {{ domain_focus }}, I am excited about the opportunity to contribute to {{ company }}'s mission."
        - "My extensive experience in {{ relevant_technical_areas }} aligns perfectly with {{ company }}'s {{ business_focus }}. At {{ recent_company }}, {{ primary_achievement_with_metrics }}. I also {{ secondary_achievement_with_impact }}."
        - "What particularly excites me about this role is {{ specific_role_attraction }}. At {{ previous_company }}, {{ technical_achievement_with_metrics }}â€”experience that translates directly to {{ relevant_job_responsibilities }}."
        - "Beyond technical expertise, I thrive in {{ collaboration_style }}, having {{ cross_functional_experience }}. My international experience {{ geographic_experience }} has strengthened my {{ cultural_strengths }}. I am fluent in {{ languages_list }}, and am available to start {{ availability }}."
        - "Thank you for considering my application. I am eager to bring my {{ key_expertise }} to {{ company }} and contribute to {{ specific_company_goals }}."

      signature: |
        {{ closing_style }},
        {{ full_name }}